<nav class="navbar pt-1 pb-1">
    <span class="navbar-brand p-0 m-0" ui-sref="reimbursement-registration">
    <i class="fa fa-arrow-left" style="cursor:pointer"></i>&nbsp;&nbsp;Claim Registration</span>
</nav>
<section class="">
    <div class="leftContainer pl-2 pr-2" ng-class="{'col-sm-12' : !showUpload, 'col-sm-7' : showUpload}" style="left:0px !important;">
        <div class="searchBar" ng-if="isNew">
            <div class="searchBarRow">
                <div class="searchBarRow reimbListTabl" style="display: block">
                    <my-search-box search-info="fieldsObject" callback="searchClaims(data)" btns-width="50%" module-name="registration-general"></my-search-box>
                </div>
            </div>
        </div>

        <div class="resultBox mb-4" ng-class="{'mt-3' : isNew}">
            <form name="form">
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-12">
                            <md-input-container flex-gt-sm>
                                <label>Voucher Number</label>
                                <input type="text" ng-model="regDetail.voucherNumber" />
                            </md-input-container>
                        </div>
                    </div>
                </div>   
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container flex-gt-sm>
                                <label>Policy Number</label>
                                <input type="text" ng-model="regDetail.policyNumber" ng-disabled="true"/>
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container flex-gt-sm>
                                <label>Member Number</label>
                                <input type="text"  ng-model="regDetail.memberNumber" ng-disabled="true"/>
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container flex-gt-sm>
                                <label>Member Name</label>
                                <input type="text"  ng-model="regDetail.memberName" />
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container flex-gt-sm>
                                <label>Emirates ID</label>
                                <input type="text" ng-model="regDetail.uidId" ng-disabled="true"/>
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container flex-gt-sm>
                                <label>Mobile Number 1</label>
                                <input type="text" ng-model="regDetail.mobileNum1" ng-disabled="true"/>
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container flex-gt-sm>
                                <label>Email ID 1</label>
                                <input  type="email"   ng-model="regDetail.email1" ng-disabled="true"/>
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container flex-gt-sm>
                                <label>Mobile Number 2</label>
                                <input type="text"  ng-model="regDetail.mobileNum2" />
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container flex-gt-sm>
                                <label>Email ID 2</label>
                                <input type="email" ng-model="regDetail.email2" />
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container flex-gt-sm>
                                <label>Previous Request</label>
                                <input type="text" ng-model="regDetail.prevRequest" />
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container flex-gt-sm>
                                <label>Requested Amount</label>
                                <input type="number" name="requestAmt" ng-model="regDetail.requestAmt" required/>
                                <div ng-if="localValidation && !form.requestAmt.$modelValue" class="error">Please Enter The Requested Amount</div>
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container flex-gt-sm>
                                <label class="focuslabel">Encounter Type</label>
                                <md-select md-input-name="encType" ng-model="regDetail.encType" required >
                                    <md-option value="{{option.id}}" ng-repeat="option in encounterTypes">{{option.value}}</md-option>
                                </md-select>
                                <div ng-if="localValidation && !regDetail.encType" class="error">Please Enter The Encounter Type</div>
                                
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container flex-gt-sm>
                                <label>Request Type</label>
                                <md-select md-input-name="EncounterType" ng-model="regDetail.reqType" required>
                                    <md-option ng-repeat="option in requestTypes" value="{{option.id}}">{{option.value}}</md-option>
                                </md-select>
                                <div ng-if="localValidation && !regDetail.reqType" class="error">Please Enter The Encounter Type</div>
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="fldsWrap clearfix">
                    <div layout-gt-sm="row">
                        <div class="col-sm-6">
                            <md-input-container>
                                <label>Request Received Date</label>
                                <md-datepicker ng-keyup="clearDatepickerKeyupValue($event);" md-input-name="reqDate" ng-model="regDetail.reqReceivedDate" md-hide-icons="triangle"
                                    md-open-on-focus required ></md-datepicker>
                                    <div ng-if="localValidation && !regDetail.reqReceivedDate" class="error">Please Enter The Encounter Type</div>
                            </md-input-container>
                        </div>
                        <div class="col-sm-6 colborder">
                            <md-input-container>
                                <label>Service From Date</label>
                                <md-datepicker ng-keyup="clearDatepickerKeyupValue($event);" md-input-name="fromDate" ng-model="regDetail.serviceFmDate" md-hide-icons="triangle"
                                    md-open-on-focus required ></md-datepicker>
                                    <div ng-if="localValidation && !regDetail.serviceFmDate" class="error">Please Enter The Encounter Type</div>
                            </md-input-container>
                        </div>
                    </div>
                </div>
            </form>
            <div class="fldsWrap clearfix">
                <div class="fieldsCol fieldsFilledCol">
                    <label class="top_4">Reported By</label>
                    <div class="buttonGroups">
                        <span  ng-repeat="option in reportByTypes">
                            <button type="button" class="btn btn-outline-primary btn-sm" ng-class="{'btnSelect' : regDetail.reportedBy == option.id}" ng-click="setReportedBy(option.id)">{{option.value}}</button>
                        </span>
                    </div>
                </div>
            </div>
            <div class="fldsWrap clearfix">
                <div class="fieldsCol fieldsFilledCol pb-2">
                    <label class="top_4">Payment Way</label>
                    <div class="buttonGroups">
                        <span ng-repeat="option in paymentTypes">
                              <button type="button" class="btn btn-outline-primary btn-sm" ng-class="{'btnSelect' : regDetail.paymentWay == option.id}" ng-click="setPaymentWay(option.id)">{{option.value}}</button>    
                        </span>
                    </div>
                </div>
                <div class="fldsWrap clearfix b0 row" ng-show="paymentWay == '01'">
                    <div class="col-sm-4">
                        <div layout-gt-sm="row">
                            <div class="pb-1 iban-box">
                                <md-input-container flex-gt-sm class="iban-input">
                                    <label>IBAN Number</label>
                                    <input type="text" ng-model="regDetail.paymentRefNum" />
                                </md-input-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="fldsWrap clearfix docFont p-2">
                <h6>Documents</h6>
                <div class="row pt-2">
                    <div class="col-sm-3">
                        <md-input-container style="margin:0px;width:100%">
                            <md-select ng-model="docTypes" multiple="true" ng-change="filterDocuments()" ng-disabled="documents.length == 0" placeholder="Type">
                                <md-option ng-repeat="option in documentTypes" value="{{option.id}}">{{option.value}}</md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                    <div class="col-sm-2">
                        <button type="button" class="btn btn-outline-primary btn-sm p1" ng-click="clearDocFilter()">Clear</button>
                    </div>
                    <div class="col-sm-7">
                        <button type="button" class="btn btn-outline-primary btn-sm float-right" ng-click="documentsUpload()">Upload</button>
                    </div>
                </div>
                <div ng-if="documents.length > 0 && uploaded" id="thumbnailSlider" ng-style="{'padding-left' : documents.length > 2 ? '15px' : '0px'}"
                    class="col-sm-11">
                    <ui-carousel slides="documents" slides-to-show="noOfSlides" slides-to-scroll="noOfSlides" initial-slide="0" style="margin-bottom:0px;margin-left: 15px;padding-top: 24px;"
                        infinite="false" name="'thumbnailSlider'" ng-class="{'img-padding' : (showUpload && $odd), 'img-padding' : !showUpload}">
                        <carousel-item>
                            <div style="padding:0px 5px 2px 7px;">
                                <span href="{{item.base64String}}" download="{{item.name}}" style="float:left; color:#00aeef;font-size:16px;cursor:pointer;">
                                    <i class="fa fa-cloud-download"></i>
                                </span>
                                <span style="float:right; cursor:pointer;">
                                    <i class="fa fa-remove" ng-click="deleteFile($index, item.id)" style="color:red;"></i>&nbsp;&nbsp;
                                    <i class="fa fa-pencil" ng-click="openDocumentModal($index);" style="color:black;"></i>
                                </span>
                            </div>
                            <div class="thumbnail-card" ng-class="{'img-padding' : $odd}">
                                <div style="height:127px;padding:10px;">
                                    <thumbnail file-type="{{ item.ext }}" source="{{ item.base64String }}" max-height="118" max-width="195" class="pdf-view" ng-show="item.ext == 'image'"
                                        style="padding:5px;"></thumbnail>
                                    <thumbnail file-type="{{ item.ext }}" source="{{ item.base64String }}" class="pdf-view" max-height="118" max-width="195" ng-show="item.ext == 'pdf'"
                                        style="padding:5px;"></thumbnail>
                                    <div ng-show="item.ext == 'docx'">
                                        <i class="fa fa-file-word-o center" style="font-size:90px; color:#26559a; width:160px; height: 95px; text-align:center"></i>
                                    </div>
                                    <div ng-show="item.ext == 'excel'">
                                        <i class="fa fa-file-excel-o center" style="font-size:90px; color:green; width:160px; height: 95px; text-align:center"></i>
                                    </div>
                                </div>
                                <div class="upload-details">
                                    <p class="slide-text-truncate">
                                        <a href="" ng-click="showPreview($index, item)">
                                            <span>{{item.docName}}</span>
                                            <br>
                                        </a>
                                        <span>Uploaded on {{item.uploadedDate | date: 'mediumDate'}}</span>
                                        <br>
                                    </p>
                                    <p>
                                        <i class="fa fa-file-picture-o upload-file-icon" ng-show="item.ext == 'image'" style="color:#00aeef;"></i>
                                        <i class="fa fa-file-pdf-o upload-file-icon" ng-show="item.ext == 'pdf'" style="color:red;"></i>
                                        <i class="fa fa-file-word-o upload-file-icon" ng-show="item.ext == 'docx'" style="color:#26559a;"></i>
                                        <i class="fa fa-file-excel-o upload-file-icon" ng-show="item.ext == 'excel'" style="color:green"></i>
                                    </p>
                                </div>
                            </div>
                        </carousel-item>
                        <carousel-prev>
                            <i class="fa fa-chevron-left" style="font-size: 16px;"></i>
                        </carousel-prev>
                        <carousel-next>
                            <i class="fa fa-chevron-right" style="font-size: 16px;"></i>
                        </carousel-next>
                    </ui-carousel>
                </div>
                <div ng-if="documents.length == 0" class="pt-5" style="text-align: center"> No Documents Found</div>
            </div>

            <div class="fldsWrap pr-3 pb-2 pt-2 clearfix">
                <button type="button" class="btn btn-primary float-right" ng-click="saveRegistrationDetails()">Submit</button>
            </div>
        </div>

    </div>
    <div class="rightContainer col-sm-5" ng-if="showUpload" style="height: 95vh; margin-right: -10px;">
        <a href="javascript:;" class="infoToggleBtn" ng-click="toggleInfo();" style="margin-left:17px;position: absolute;top:0">
            <span class="oi" data-glyph="arrow-right"></span>
            <br />hide</a>
        <ui-carousel slides="documents" slides-to-show="1" slides-to-scroll="1" initial-slide="previewIndex" style="width:98%;height:100%; margin:39px 0px 0px 18px;"
            infinite="false" name="'previewSlider'" ng-if="documents.length > 0 && isPreview">
            <carousel-item>
                <div style="width:96%; padding:5px;">
                    <div ng-show="item.ext != 'docx' && item.ext != 'excel'" style="padding-left:5px;">
                        <iframe ng-src="{{trustUrl(item)}}" width="98%" height="590px;" ng-show="item.ext == 'pdf'"></iframe>
                        <img ng-src="{{trustUrl(item)}}" ng-show="item.ext != 'pdf'" style="width:98%;height:590px" />
                    </div>
                    <div ng-show="item.ext == 'docx' || item.ext == 'excel'" style="width:98%; height:500px;color:white;font-size:25px;text-align:center">
                        <br>
                        <br>
                        <br>No Preview Available
                    </div>
                </div>
            </carousel-item>
            <carousel-prev>
                <i class="fa fa-chevron-left" style="font-size: 20px;"></i>
            </carousel-prev>
            <carousel-next>
                <i class="fa fa-chevron-right" style="font-size: 20px;"></i>
            </carousel-next>
        </ui-carousel>
        <div class="uploadPlaceHolder" ng-hide="isPreview" ng-if="!hasMandatory" style="height:80%">
            <h2>Upload your Claim scaned copy</h2>
            <div style="padding: 0px 4px 4px 4px;">
                <div class="fldsWrap clearfix">
                    <md-input-container flex-gt-sm>
                        <label>Upload Type</label>
                        <md-select ng-model="upload.type">
                            <md-option ng-repeat="option in documentTypes" value="option.id">{{option.value}}</md-option>
                        </md-select>
                    </md-input-container>
                </div>
                <div class="fldsWrap clearfix">
                    <md-input-container flex-gt-sm>
                        <label>Upload Description</label>
                        <input type="text" ng-model="upload.description">
                    </md-input-container>
                </div>
            </div>
            <div ngf-drop ngf-select ng-model="files" class="drop-box" ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="true"
                ngf-change="uploadFiles($files, null)" ng-show="upload.type">
                <span class="oi align-middle mr-1" data-glyph="cloud-upload" style="color:#00aeef"></span>
                Drop Files or click to upload
            </div>
        </div>
        <div ng-repeat="f in files" ng-style="{'padding-top' : $first ? '25px' : '20px'}" ng-hide="uploaded || isPreview" ng-if="!hasMandatory">
            {{f.name}}
            <div style="background : #ccc!important; height:3px !important">
                <div class="fprogress" style="width:{{f.progress}}%" ng-show="f.progress >= 0"></div>
            </div>
        </div>
        <div id="mandatoryUpload" class="uploadPlaceHolder" ng-hide="isPreview" ng-if="hasMandatory">
            <h2>Upload your Claim scaned copy</h2>
            <uib-accordion close-others="false">
                <div uib-accordion-group class="panel-default" is-open="isOpen" ng-init="isOpen = (doc.isRequired && !doc.files)" ng-repeat="doc in documentTypes | orderBy:'isRequired' : true"
                    ngf-drop="uploadFiles($files, doc)" ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="true">
                    <uib-accordion-heading>
                        <div class="acc-header">
                            {{doc.value}}
                            <!-- ({{!doc.files ? 0 : doc.files.length}}) -->
                            <span style="color:red;" ng-show="doc.isRequired">*</span>
                            <span class="oi expanded" data-glyph="chevron-bottom"></span>
                            <span class="oi collapsed" data-glyph="chevron-top"></span>
                        </div>

                    </uib-accordion-heading>
                    <div ngf-select ng-model="files" class="drop-box" ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="true"
                        ngf-change="uploadFiles($files, doc)">
                        <span class="oi align-middle mr-1" data-glyph="cloud-upload" style="color:#00aeef"></span>
                        Drop Files or click to upload
                    </div>
                </div>
            </uib-accordion>
        </div>
    </div>
</section>